
import { Ability, Skill, BackgroundData, DetailData, SubclassData, Trait } from '../types';

export const SPECIES_LIST = [
  'Human', 'Elf', 'Dwarf', 'Halfling', 'Dragonborn', 'Gnome', 'Orc', 'Tiefling', 'Aasimar', 'Goliath'
];

export const CLASS_LIST = [
  'Barbarian', 'Bard', 'Cleric', 'Druid', 'Fighter', 'Monk', 'Paladin', 'Ranger', 'Rogue', 'Sorcerer', 'Warlock', 'Wizard'
];

export const ALIGNMENTS = [
  'Lawful Good', 'Neutral Good', 'Chaotic Good', 
  'Lawful Neutral', 'True Neutral', 'Chaotic Neutral', 
  'Lawful Evil', 'Neutral Evil', 'Chaotic Evil'
];

export const LANGUAGES = [
  'Common', 'Dwarvish', 'Elvish', 'Giant', 'Gnomish', 'Goblin', 'Halfling', 'Orc', 
  'Abyssal', 'Celestial', 'Draconic', 'Deep Speech', 'Infernal', 'Primordial', 'Sylvan', 'Undercommon'
];

export const STANDARD_ARRAY = [15, 14, 13, 12, 10, 8];

export const HIT_DIE: Record<string, number> = {
  'Barbarian': 12, 'Fighter': 10, 'Paladin': 10, 'Ranger': 10, 'Bard': 8, 'Cleric': 8, 'Druid': 8, 'Monk': 8, 'Rogue': 8, 'Warlock': 8, 'Sorcerer': 6, 'Wizard': 6
};

export const CLASS_SAVING_THROWS: Record<string, Ability[]> = {
  'Barbarian': ['STR', 'CON'], 'Bard': ['DEX', 'CHA'], 'Cleric': ['WIS', 'CHA'], 'Druid': ['INT', 'WIS'],
  'Fighter': ['STR', 'CON'], 'Monk': ['STR', 'DEX'], 'Paladin': ['WIS', 'CHA'], 'Ranger': ['STR', 'DEX'],
  'Rogue': ['DEX', 'INT'], 'Sorcerer': ['CON', 'CHA'], 'Warlock': ['WIS', 'CHA'], 'Wizard': ['INT', 'WIS']
};

export const CLASS_STAT_PRIORITIES: Record<string, Ability[]> = {
  'Barbarian': ['STR', 'CON', 'DEX'], 'Bard': ['CHA', 'DEX', 'CON'], 'Cleric': ['WIS', 'CON', 'STR'], 'Druid': ['WIS', 'CON', 'DEX'],
  'Fighter': ['STR', 'CON', 'DEX'], 'Monk': ['DEX', 'WIS', 'CON'], 'Paladin': ['STR', 'CHA', 'CON'], 'Ranger': ['DEX', 'WIS', 'CON'],
  'Rogue': ['DEX', 'INT', 'CON'], 'Sorcerer': ['CHA', 'CON', 'DEX'], 'Warlock': ['CHA', 'CON', 'DEX'], 'Wizard': ['INT', 'CON', 'DEX']
};

export const CLASS_SKILL_DATA: Record<string, { count: number, options: Skill[] | 'Any' }> = {
  'Barbarian': { count: 2, options: ['Animal Handling', 'Athletics', 'Intimidation', 'Nature', 'Perception', 'Survival'] },
  'Bard': { count: 3, options: 'Any' },
  'Cleric': { count: 2, options: ['History', 'Insight', 'Medicine', 'Persuasion', 'Religion'] },
  'Druid': { count: 2, options: ['Arcana', 'Animal Handling', 'Insight', 'Medicine', 'Nature', 'Perception', 'Religion', 'Survival'] },
  'Fighter': { count: 2, options: ['Acrobatics', 'Animal Handling', 'Athletics', 'History', 'Insight', 'Intimidation', 'Perception', 'Survival'] },
  'Monk': { count: 2, options: ['Acrobatics', 'Athletics', 'History', 'Insight', 'Religion', 'Stealth'] },
  'Paladin': { count: 2, options: ['Athletics', 'Insight', 'Intimidation', 'Medicine', 'Persuasion', 'Religion'] },
  'Ranger': { count: 3, options: ['Animal Handling', 'Athletics', 'Insight', 'Investigation', 'Nature', 'Perception', 'Stealth', 'Survival'] },
  'Rogue': { count: 4, options: ['Acrobatics', 'Athletics', 'Deception', 'Insight', 'Intimidation', 'Investigation', 'Perception', 'Performance', 'Persuasion', 'Sleight of Hand', 'Stealth'] },
  'Sorcerer': { count: 2, options: ['Arcana', 'Deception', 'Insight', 'Intimidation', 'Persuasion', 'Religion'] },
  'Warlock': { count: 2, options: ['Arcana', 'Deception', 'History', 'Intimidation', 'Investigation', 'Nature', 'Religion'] },
  'Wizard': { count: 2, options: ['Arcana', 'History', 'Insight', 'Investigation', 'Medicine', 'Religion'] }
};

export const BACKGROUNDS_DATA: Record<string, BackgroundData> = {
    'Acolyte': { description: 'You spent your early years in a temple.', scores: ['WIS', 'INT', 'CHA'], feat: 'Magic Initiate (Cleric)', featDescription: 'Learn two Cleric cantrips and one 1st-level Cleric spell.', skills: ['Insight', 'Religion'], equipment: ['Holy Symbol', 'Prayer Book', 'Stick of Incense (5)', 'Vestments'] },
    'Artisan': { description: 'You began as an apprentice to a craftsperson.', scores: ['STR', 'DEX', 'INT'], feat: 'Crafter', featDescription: 'Discount on buying nonmagical items. Craft items faster.', skills: ['Investigation', 'Persuasion'], equipment: ['Artisan\'s Tools', 'Traveler\'s Clothes'] },
    'Charlatan': { description: 'You care little for the laws of society.', scores: ['CHA', 'DEX', 'CON'], feat: 'Skilled', featDescription: 'Gain proficiency in 3 Skills or Tools.', skills: ['Deception', 'Sleight of Hand'], equipment: ['Costume', 'Forged Documents', 'Disguise Kit'] },
    'Criminal': { description: 'You have a history of breaking the law.', scores: ['DEX', 'CON', 'INT'], feat: 'Alert', featDescription: 'Proficiency in Initiative. Swap initiative with ally.', skills: ['Sleight of Hand', 'Stealth'], equipment: ['Crowbar', 'Dark Common Clothes', 'Thieves\' Tools'] },
    'Entertainer': { description: 'You thrive in front of an audience.', scores: ['CHA', 'DEX', 'WIS'], feat: 'Musician', featDescription: 'Grant Heroic Inspiration to allies after a rest.', skills: ['Acrobatics', 'Performance'], equipment: ['Musical Instrument', 'Costume', 'Mirror'] },
    'Farmer': { description: 'You grew up close to the land.', scores: ['STR', 'CON', 'WIS'], feat: 'Tough', featDescription: 'Gain +2 HP per level.', skills: ['Animal Handling', 'Nature'], equipment: ['Carpenter\'s Tools', 'Iron Pot', 'Shovel', 'Sickle'] },
    'Guard': { description: 'You served in a militia or guard force.', scores: ['STR', 'INT', 'WIS'], feat: 'Alert', featDescription: 'Proficiency in Initiative. Swap initiative with ally.', skills: ['Athletics', 'Perception'], equipment: ['Manacles', 'Horn', 'Uniform'] },
    'Guide': { description: 'You know the wilderness well.', scores: ['DEX', 'CON', 'WIS'], feat: 'Magic Initiate (Druid)', featDescription: 'Learn two Druid cantrips and one 1st-level Druid spell.', skills: ['Stealth', 'Survival'], equipment: ['Bedroll', 'Tent', 'Quiver'] },
    'Hermit': { description: 'You spent years in seclusion.', scores: ['WIS', 'CON', 'CHA'], feat: 'Healer', featDescription: 'Reroll 1s on healing dice. Use Healer\'s Kit to restore HP.', skills: ['Medicine', 'Religion'], equipment: ['Herbalism Kit', 'Oil Flask', 'Quarterstaff'] },
    'Merchant': { description: 'You know how to make a deal.', scores: ['CHA', 'INT', 'WIS'], feat: 'Lucky', featDescription: 'Gain Luck Points to reroll d20s.', skills: ['Animal Handling', 'Persuasion'], equipment: ['Abacus', 'Quill & Ink', 'Navigator\'s Tools'] },
    'Noble': { description: 'You were raised in wealth and power.', scores: ['CHA', 'INT', 'WIS'], feat: 'Skilled', featDescription: 'Gain proficiency in 3 Skills or Tools.', skills: ['History', 'Persuasion'], equipment: ['Signet Ring', 'Fine Clothes', 'Gaming Set'] },
    'Sage': { description: 'You spent your time studying lore.', scores: ['INT', 'CON', 'WIS'], feat: 'Magic Initiate (Wizard)', featDescription: 'Learn two Wizard cantrips and one 1st-level Wizard spell.', skills: ['Arcana', 'History'], equipment: ['Quarterstaff', 'Book', 'Parchment'] },
    'Sailor': { description: 'You sailed the seas.', scores: ['DEX', 'STR', 'WIS'], feat: 'Tavern Brawler', featDescription: 'Unarmed strikes deal 1d4. Push/Topple on hit.', skills: ['Acrobatics', 'Perception'], equipment: ['Rope (50ft)', 'Navigator\'s Tools'] },
    'Scribe': { description: 'You spent formative years in a scriptorium or library.', scores: ['DEX', 'INT', 'WIS'], feat: 'Skilled', featDescription: 'Gain proficiency in 3 Skills or Tools.', skills: ['Investigation', 'Perception'], equipment: ['Calligrapher\'s Supplies', 'Fine Clothes', 'Lamp', 'Parchment (12 sheets)'] },
    'Soldier': { description: 'You were trained for war.', scores: ['STR', 'DEX', 'CON'], feat: 'Savage Attacker', featDescription: 'Advantage on weapon damage rolls.', skills: ['Athletics', 'Intimidation'], equipment: ['Gaming Set', 'Healer\'s Kit'] },
    'Wayfarer': { description: 'You grew up on the road.', scores: ['DEX', 'WIS', 'CHA'], feat: 'Lucky', featDescription: 'Gain Luck Points to reroll d20s.', skills: ['Insight', 'Stealth'], equipment: ['Map', 'Compass'] }
};

export const CLASS_FEATURES: Record<string, string[]> = {
    'Barbarian': ['Rage', 'Unarmored Defense', 'Weapon Mastery'], 'Bard': ['Bardic Inspiration', 'Spellcasting'], 'Cleric': ['Spellcasting', 'Divine Order'], 'Druid': ['Spellcasting', 'Druidic', 'Primal Order'],
    'Fighter': ['Fighting Style', 'Second Wind', 'Weapon Mastery'], 'Monk': ['Martial Arts', 'Unarmored Defense'], 'Paladin': ['Lay On Hands', 'Spellcasting', 'Weapon Mastery'], 'Ranger': ['Spellcasting', 'Favored Enemy', 'Weapon Mastery'],
    'Rogue': ['Expertise', 'Sneak Attack', 'Thieves\' Cant', 'Weapon Mastery'], 'Sorcerer': ['Spellcasting', 'Innate Sorcery'], 'Warlock': ['Eldritch Invocations', 'Pact Magic'], 'Wizard': ['Spellcasting', 'Ritual Adept', 'Arcane Recovery']
};

export const CLASS_PROGRESSION: Record<string, Record<number, string[]>> = {
    'Barbarian': { 2: ['Reckless Attack', 'Danger Sense'], 3: ['Primal Knowledge'], 5: ['Extra Attack', 'Fast Movement'], 7: ['Feral Instinct', 'Instinctive Pounce'], 9: ['Brutal Strike'], 11: ['Relentless Rage'], 13: ['Improved Brutal Strike'], 15: ['Persistent Rage'], 18: ['Indomitable Might'], 20: ['Primal Champion'] },
    'Bard': { 2: ['Expertise', 'Jack of All Trades'], 5: ['Font of Inspiration'], 7: ['Countercharm'], 10: ['Magical Secrets'], 18: ['Superior Inspiration'], 20: ['Words of Creation'] },
    'Cleric': { 2: ['Channel Divinity'], 5: ['Sear Undead'], 7: ['Blessed Strikes'], 10: ['Divine Intervention'], 14: ['Improved Blessed Strikes'], 20: ['Greater Divine Intervention'] },
    'Druid': { 2: ['Wild Shape', 'Wild Companion'], 5: ['Wild Resurgence'], 7: ['Elemental Fury'], 15: ['Improved Elemental Fury'], 18: ['Beast Spells'], 20: ['Archdruid'] },
    'Fighter': { 2: ['Action Surge', 'Tactical Mind'], 5: ['Extra Attack', 'Tactical Shift'], 9: ['Indomitable', 'Tactical Master'], 11: ['Two Extra Attacks'], 13: ['Studied Attacks'], 17: ['Action Surge (two uses)', 'Indomitable (three uses)'], 20: ['Three Extra Attacks'] },
    'Monk': { 2: ['Monk\'s Focus', 'Unarmored Movement', 'Uncanny Metabolism'], 3: ['Deflect Attacks'], 4: ['Slow Fall'], 5: ['Extra Attack', 'Stunning Strike'], 6: ['Empowered Strikes'], 7: ['Evasion'], 9: ['Acrobatic Movement'], 10: ['Heightened Focus', 'Self-Restoration'], 13: ['Deflect Energy'], 14: ['Disciplined Survivor'], 15: ['Perfect Focus'], 18: ['Superior Defense'], 20: ['Body and Mind'] },
    'Paladin': { 2: ['Fighting Style', 'Paladin\'s Smite'], 5: ['Extra Attack', 'Faithful Steed'], 6: ['Aura of Protection'], 9: ['Abjure Foes'], 10: ['Aura of Courage'], 11: ['Radiant Strikes'], 14: ['Restoring Touch'], 18: ['Aura Expansion'] },
    'Ranger': { 2: ['Deft Explorer', 'Fighting Style'], 5: ['Extra Attack'], 6: ['Roving'], 9: ['Expertise'], 10: ['Tireless'], 13: ['Relentless Hunter'], 14: ['Nature\'s Veil'], 17: ['Precise Hunter'], 18: ['Feral Senses'], 20: ['Foe Slayer'] },
    'Rogue': { 2: ['Cunning Action'], 3: ['Steady Aim'], 5: ['Cunning Strike', 'Uncanny Dodge'], 6: ['Expertise'], 7: ['Evasion', 'Reliable Talent'], 11: ['Improved Cunning Strike'], 14: ['Devious Strikes'], 15: ['Slippery Mind'], 18: ['Elusive'], 20: ['Stroke of Luck'] },
    'Sorcerer': { 2: ['Font of Magic', 'Metamagic'], 5: ['Sorcerous Restoration'], 7: ['Sorcery Incarnate'], 20: ['Arcane Apotheosis'] },
    'Warlock': { 2: ['Magical Cunning'], 9: ['Contact Patron'], 11: ['Mystic Arcanum (level 6)'], 13: ['Mystic Arcanum (level 7)'], 15: ['Mystic Arcanum (level 8)'], 17: ['Mystic Arcanum (level 9)'], 20: ['Eldritch Master'] },
    'Wizard': { 2: ['Scholar'], 5: ['Memorize Spell'], 18: ['Spell Mastery'], 20: ['Signature Spells'] }
};

export const SPECIES_DETAILS: Record<string, DetailData> = {
  'Human': { name: 'Human', description: 'Versatile and ambitious, humans are diverse innovators found across the multiverse.', size: 'Medium', speed: 30, traits: [{ name: 'Resourceful', description: 'You gain Heroic Inspiration whenever you finish a Long Rest.' }, { name: 'Skillful', description: 'You gain proficiency in one Skill of your choice.' }, { name: 'Versatile', description: 'You gain an Origin Feat of your choice (e.g., Skilled, Alert).' }] },
  'Elf': { name: 'Elf', description: 'Magical people of otherworldly grace, living in the world but apart from it.', size: 'Medium', speed: 30, traits: [{ name: 'Darkvision', description: 'See in dim light within 60ft as bright light, and darkness as dim light.' }, { name: 'Fey Ancestry', description: 'Advantage on saves vs Charmed condition. Magic cannot put you to sleep.' }, { name: 'Keen Senses', description: 'Proficiency in the Insight, Perception, or Survival skill.' }, { name: 'Elven Lineage', description: 'Choose Drow (120ft Darkvision, Dancing Lights), High Elf (Prestidigitation, swap on rest), or Wood Elf (Speed 35, Druidcraft).' }, { name: 'Trance', description: 'You don\'t sleep. You meditate for 4 hours to gain the benefits of a Long Rest.' }] },
  'Dwarf': { name: 'Dwarf', description: 'Solid and enduring like the mountains they love, weathering the passage of centuries.', size: 'Medium', speed: 30, traits: [{ name: 'Darkvision', description: '120ft Darkvision range.' }, { name: 'Dwarven Resilience', description: 'Resistance to Poison damage and Advantage on saves vs Poisoned condition.' }, { name: 'Dwarven Toughness', description: 'Hit Point maximum increases by 1, and increases by 1 every time you gain a level.' }, { name: 'Stonecunning', description: 'Bonus Action to gain Tremorsense (range 60ft) on stone surfaces for 10 minutes.' }] },
  'Halfling': { name: 'Halfling', description: 'The diminutive halflings survive by being stout and lucky.', size: 'Small', speed: 30, traits: [{ name: 'Brave', description: 'Advantage on saves vs the Frightened condition.' }, { name: 'Halfling Nimbleness', description: 'You can move through the space of any creature that is a size larger than yours.' }, { name: 'Luck', description: 'When you roll a 1 on a d20 for an attack, check, or save, you can reroll it (must use new roll).' }, { name: 'Naturally Stealthy', description: 'You can take the Hide action even when you are obscured only by a creature that is at least one size larger than you.' }] },
  'Dragonborn': { name: 'Dragonborn', description: 'Born of dragons, they walk proudly through a world that greets them with fearful incomprehension.', size: 'Medium', speed: 30, traits: [{ name: 'Breath Weapon', description: 'Exhale energy (Line or Cone) dealing 1d10 damage (scales with level). Replaces an attack.' }, { name: 'Damage Resistance', description: 'Resistance to the damage type associated with your ancestry (Acid, Fire, Lightning, Poison, or Cold).' }, { name: 'Darkvision', description: 'See in dim light within 60ft as bright light.' }, { name: 'Draconic Flight', description: 'At 5th level, you can sprout spectral wings to fly for 10 minutes (Fly Speed = Speed).' }] },
  'Gnome': { name: 'Gnome', description: 'A slight expression of their vibrant energy, gnomes are curious and inventive.', size: 'Small', speed: 30, traits: [{ name: 'Darkvision', description: 'See in dim light within 60ft as bright light.' }, { name: 'Gnomish Cunning', description: 'Advantage on Intelligence, Wisdom, and Charisma saves.' }, { name: 'Gnomish Lineage', description: 'Choose Forest (Know Minor Illusion, Speak with Animals) or Rock (Know Mending/Prestidigitation, create tiny clockwork devices).' }] },
  'Orc': { name: 'Orc', description: 'Orcs are moved by a powerful passion for life and combat capabilities.', size: 'Medium', speed: 30, traits: [{ name: 'Adrenaline Rush', description: 'Dash as a Bonus Action. When you do, gain Temp HP equal to proficiency bonus.' }, { name: 'Darkvision', description: '120ft Darkvision.' }, { name: 'Relentless Endurance', description: 'When reduced to 0 HP, drop to 1 HP instead (once per Long Rest).' },] },
  'Tiefling': { name: 'Tiefling', description: 'Souls influenced by the Lower Planes, often bearing horns or tails.', size: 'Medium', speed: 30, traits: [{ name: 'Darkvision', description: 'See in dim light within 60ft as bright light.' }, { name: 'Fiendish Legacy', description: 'Choose Abyssal (Poison res, Poison Spray), Chthonic (Necrotic res, Chill Touch), or Infernal (Fire res, Fire Bolt).' }, { name: 'Otherworldly Presence', description: 'You know the Thaumaturgy cantrip.' }] },
  'Aasimar': { name: 'Aasimar', description: 'Souls touched by the power of Mount Celestia, bearing a spark of the divine.', size: 'Medium', speed: 30, traits: [{ name: 'Celestial Resistance', description: 'Resistance to Necrotic and Radiant damage.' }, { name: 'Darkvision', description: 'See in dim light within 60ft as bright light.' }, { name: 'Healing Hands', description: 'Magic Action to heal a creature (roll d4s equal to PB). No spell slots required.' }, { name: 'Light Bearer', description: 'You know the Light cantrip.' }, { name: 'Celestial Revelation', description: 'At 3rd level, transform to deal extra damage and fly or radiate light.' }] },
  'Goliath': { name: 'Goliath', description: 'Strong and reclusive, towering over most other folk.', size: 'Medium', speed: 35, traits: [{ name: 'Giant Ancestry', description: 'Choose one: Cloud (Teleport), Fire (Fire Dmg), Frost (Cold Dmg/Slow), Hill (Topple), Stone (Reaction Reduce Dmg), Storm (Reaction Thunder Dmg).' }, { name: 'Large Form', description: 'Starting at 5th level, you can grow to Large size as a Bonus Action for 10 minutes.' }, { name: 'Powerful Build', description: 'Advantage on checks to end the Grappled condition. Lift as one size larger.' },] }
};

export const CLASS_DETAILS: Record<string, DetailData> = {
  'Barbarian': { name: 'Barbarian', description: 'A fierce warrior who can enter a battle rage.', traits: [{ name: 'Rage', description: 'Bonus Action to enter. Adv on STR checks/saves, Resistance to B/P/S damage, +Rage Damage to STR attacks.' }, { name: 'Unarmored Defense', description: 'AC equals 10 + DEX mod + CON mod when not wearing armor.' }, { name: 'Weapon Mastery', description: 'Unlock special properties (Cleave, Topple) on your chosen weapons.' }] },
  'Bard': { name: 'Bard', description: 'An inspiring magician whose power echoes the music of creation.', traits: [{ name: 'Bardic Inspiration', description: 'Bonus Action to give a die (d6) to an ally to boost d20 rolls.' }, { name: 'Spellcasting', description: 'Cast spells from the Arcane list. Charisma is your casting ability.' }] },
  'Cleric': { name: 'Cleric', description: 'A priestly champion who wields divine magic.', traits: [{ name: 'Spellcasting', description: 'Prepare spells from the Divine list daily. Wisdom is your casting ability.' }, { name: 'Divine Order', description: 'Choose Protector (Heavy Armor + Martial Weapons) or Thaumaturge (Extra Cantrip + Religion bonus).' }] },
  'Druid': { name: 'Druid', description: 'A priest of the Old Faith, wielding the powers of nature.', traits: [{ name: 'Spellcasting', description: 'Prepare Primal spells. Wisdom is your casting ability.' }, { name: 'Druidic', description: 'You know the secret language of Druids.' }, { name: 'Primal Order', description: 'Choose Magician (Extra Cantrip + Arcana/Nature) or Warden (Medium Armor + Martial Weapons).' }] },
  'Fighter': { name: 'Fighter', description: 'A master of martial combat, skilled with a variety of weapons.', traits: [{ name: 'Fighting Style', description: 'Adopt a style like Archery, Defense, or Great Weapon Fighting.' }, { name: 'Second Wind', description: 'Bonus Action to regain HP (1d10 + level). Uses vary by level.' }, { name: 'Weapon Mastery', description: 'Master 3 weapons to use their tactical properties.' }] },
  'Monk': { name: 'Monk', description: 'A master of martial arts, harnessing body and spirit.', traits: [{ name: 'Martial Arts', description: 'Use DEX instead of STR for Monk weapons/unarmed. Bonus Action unarmed strike.' }, { name: 'Unarmored Defense', description: 'AC equals 10 + DEX mod + WIS mod.' }] },
  'Paladin': { name: 'Paladin', description: 'A holy warrior bound to a sacred oath.', traits: [{ name: 'Lay On Hands', description: 'Bonus Action to heal creatures from a pool of HP.' }, { name: 'Spellcasting', description: 'Prepare Divine spells. You can change them after a Long Rest.' }, { name: 'Weapon Mastery', description: 'Master 2 weapons to use their tactical properties.' }] },
  'Ranger': { name: 'Ranger', description: 'A warrior who combats threats on the edges of civilization.', traits: [{ name: 'Spellcasting', description: 'Prepare Primal spells. Wisdom is your casting ability.' }, { name: 'Favored Enemy', description: 'You always have Hunter\'s Mark prepared. Cast it without a slot (limited use).' }, { name: 'Weapon Mastery', description: 'Master 2 weapons to use their tactical properties.' }] },
  'Rogue': { name: 'Rogue', description: 'A scoundrel who uses stealth and trickery.', traits: [{ name: 'Expertise', description: 'Double proficiency bonus in two chosen skills.' }, { name: 'Sneak Attack', description: 'Deal extra damage (1d6) once per turn if you have Advantage or an ally nearby.' }, { name: 'Weapon Mastery', description: 'Master 2 weapons to use their tactical properties.' }, { name: 'Thieves\' Cant', description: 'A secret mix of dialect, jargon, and code.' }] },
  'Sorcerer': { name: 'Sorcerer', description: 'A spellcaster who draws on inherent magic.', traits: [{ name: 'Spellcasting', description: 'Cast Arcane spells spontaneously. Charisma is your casting ability.' }, { name: 'Innate Sorcery', description: 'Bonus Action to activate a rage-like state increasing spell DC and attack advantage.' }] },
  'Warlock': { name: 'Warlock', description: 'A wielder of magic derived from a pact.', traits: [{ name: 'Eldritch Invocations', description: 'Customize your powers with unique magical fragments.' }, { name: 'Pact Magic', description: 'Spell slots are always max level and recharge on a Short Rest.' }] },
  'Wizard': { name: 'Wizard', description: 'A scholarly magic-user manipulating reality.', traits: [{ name: 'Spellcasting', description: 'Learn Arcane spells from scrolls and your spellbook.' }, { name: 'Ritual Adept', description: 'Cast ritual spells without using a spell slot.' }, { name: 'Arcane Recovery', description: 'Regain some spell slots on a Short Rest (once per day).' }] }
};

export const SUBCLASS_OPTIONS: Record<string, SubclassData[]> = {
  'Barbarian': [{ name: 'Path of the Berserker', description: 'Frenzy into a fury that allows extra attacks.', features: { 3: [{ name: 'Frenzy', description: 'When you Rage, you can make a generic unarmed strike or weapon attack as a Bonus Action.' }], 6: [{ name: 'Mindless Rage', description: 'You have immunity to the Charmed and Frightened conditions while Raging.' }] } }, { name: 'Path of the Wild Heart', description: 'Adopt the aspects of animal spirits.', features: { 3: [{ name: 'Animal Speaker', description: 'You can cast Beast Sense and Speak with Animals as rituals.' }, { name: 'Rage of the Wilds', description: 'Choose Bear (Resist all dmg but psychic), Eagle (Disengage/Dash bonus), or Wolf (Advantage for allies).' }] } }, { name: 'Path of the World Tree', description: 'Draw on the vitality of the multiverse.', features: { 3: [{ name: 'Vitality of the Tree', description: 'When you Rage, you gain Temp HP. At start of turn, give Temp HP to ally.' }] } }, { name: 'Path of the Zealot', description: 'Channel divine power into your rage.', features: { 3: [{ name: 'Divine Fury', description: 'While Raging, first hit deals extra Necrotic or Radiant damage (1d6 + Level).' }] } },],
  'Bard': [{ name: 'College of Dance', description: 'Channel the cosmos through agility and movement.', features: { 3: [{ name: 'Dazzling Footwork', description: 'Unarmored Defense (10+DEX+CHA). Unarmed Strikes use Bardic Die. Agile movement.' }] } }, { name: 'College of Glamour', description: 'Weave the magic of the Feywild into your performance.', features: { 3: [{ name: 'Mantle of Inspiration', description: 'Use Bardic Inspiration to give allies Temp HP and free movement.' }] } }, { name: 'College of Lore', description: 'Collect knowledge and magical secrets from everywhere.', features: { 3: [{ name: 'Cutting Words', description: 'Use Reaction and Bardic Inspiration to reduce an enemy attack, check, or damage roll.' }, { name: 'Bonus Proficiencies', description: 'Gain 3 Skill Proficiencies.' }] } }, { name: 'College of Valor', description: 'Inspire heroes in battle and fight alongside them.', features: { 3: [{ name: 'Combat Inspiration', description: 'Allies can use your Inspiration to add to AC or Damage.' }, { name: 'Martial Training', description: 'Proficiency with Martial Weapons and Medium Armor/Shields.' }] } },],
  'Cleric': [{ name: 'Life Domain', description: 'Preserve life and heal the wounded.', features: { 3: [{ name: 'Disciple of Life', description: 'Healing spells cure extra HP (2 + Spell Level).' }, { name: 'Preserve Life', description: 'Channel Divinity to heal injured creatures up to half HP.' }] } }, { name: 'Light Domain', description: 'Wield the power of light and fire.', features: { 3: [{ name: 'Warding Flare', description: 'Reaction to impose Disadvantage on an attack against you.' }, { name: 'Radiance of the Dawn', description: 'Channel Divinity to deal Radiant damage to foes within 30ft.' }] } }, { name: 'Trickery Domain', description: 'Sow chaos and deceive your enemies.', features: { 3: [{ name: 'Blessing of the Trickster', description: 'Grant Advantage on Stealth checks to another creature.' }] } }, { name: 'War Domain', description: 'Serve as a champion of a war god.', features: { 3: [{ name: 'War Priest', description: 'Make a weapon attack as a Bonus Action (limited uses).' }] } },],
  'Druid': [{ name: 'Circle of the Land', description: 'Draw magic from specific environments.', features: { 3: [{ name: 'Circle Spells', description: 'Recover spell slots on Short Rest. Always prepared spells based on land type.' }] } }, { name: 'Circle of the Moon', description: 'Master Wild Shape into powerful combat forms.', features: { 3: [{ name: 'Combat Wild Shape', description: 'Wild Shape as Bonus Action. Cast Abjuration spells while shaped.' }, { name: 'Circle Forms', description: 'Transform into more dangerous beasts (CR 1).' }] } }, { name: 'Circle of the Sea', description: 'Channel the wrath of the ocean.', features: { 3: [{ name: 'Wrath of the Sea', description: 'Emanate a storm aura dealing Cold/Lightning damage.' }] } }, { name: 'Circle of the Stars', description: 'Harness the power of constellations.', features: { 3: [{ name: 'Starry Form', description: 'Bonus Action to enter Archer, Chalice, or Dragon form.' }] } },],
  'Fighter': [{ name: 'Battle Master', description: 'Master tactical maneuvers to control the battlefield.', features: { 3: [{ name: 'Combat Superiority', description: 'Gain Superiority Dice (d8) and Maneuvers (e.g., Trip Attack, Parry).' }, { name: 'Student of War', description: 'Proficiency with one Artisan Tool.' }] } }, { name: 'Champion', description: 'Focus on raw physical power and critical hits.', features: { 3: [{ name: 'Improved Critical', description: 'Your weapon attacks score a critical hit on a roll of 19 or 20.' }, { name: 'Remarkable Athlete', description: 'Advantage on Initiative and some Athletics checks.' }] } }, { name: 'Eldritch Knight', description: 'Combine martial prowess with wizard spells.', features: { 3: [{ name: 'Spellcasting', description: 'Cast Wizard spells (Abjuration/Evocation).' }, { name: 'Weapon Bond', description: 'Summon your bonded weapon to your hand.' }] } }, { name: 'Psi Warrior', description: 'Augment your strikes with psionic power.', features: { 3: [{ name: 'Psionic Power', description: 'Use dice to reduce damage, strike harder, or move objects.' }] } },],
  'Monk': [{ name: 'Warrior of Mercy', description: 'Manipulate life force to heal or harm.', features: { 3: [{ name: 'Hand of Harm', description: 'Deal extra Necrotic damage.' }, { name: 'Hand of Healing', description: 'Heal creature with Focus Point.' }] } }, { name: 'Warrior of Shadow', description: 'Master stealth and shadow magic.', features: { 3: [{ name: 'Shadow Arts', description: 'Cast Darkness, Darkvision, etc. using Focus Points. See through magical darkness.' }] } }, { name: 'Warrior of the Elements', description: 'Channel elemental energy into your strikes.', features: { 3: [{ name: 'Elemental Attunement', description: 'Reach increases. Deal elemental damage type.' }] } }, { name: 'Warrior of the Open Hand', description: 'Master the ultimate martial arts techniques.', features: { 3: [{ name: 'Open Hand Technique', description: 'Impose effects (Topple, Push, No Reactions) on Flurry of Blows.' }] } },],
  'Paladin': [{ name: 'Oath of Devotion', description: 'Embody the ideals of justice and virtue.', features: { 3: [{ name: 'Sacred Weapon', description: 'Add CHA mod to attack rolls.' }] } }, { name: 'Oath of Glory', description: 'Believe that destiny awaits those who earn it.', features: { 3: [{ name: 'Peerless Athlete', description: 'Advantage on Athletics/Acrobatics. Jump distance increases.' }] } }, { name: 'Oath of the Ancients', description: 'Protect the light and the natural world.', features: { 3: [{ name: 'Nature\'s Wrath', description: 'Restrain foes with spectral vines.' }] } }, { name: 'Oath of Vengeance', description: 'Punish those who commit grievous sins.', features: { 3: [{ name: 'Vow of Enmity', description: 'Gain Advantage on attacks against one creature for 1 minute.' }] } },],
  'Ranger': [{ name: 'Beast Master', description: 'Bond with a primal beast companion.', features: { 3: [{ name: 'Primal Companion', description: 'Summon a Beast of the Land, Air, or Sea to fight alongside you.' }] } }, { name: 'Fey Wanderer', description: 'Represent the courts of the Feywild.', features: { 3: [{ name: 'Dreadful Strikes', description: 'Deal extra psychic damage once per turn.' }, { name: 'Otherworldly Glamour', description: 'Add WIS mod to Charisma checks.' }] } }, { name: 'Gloom Stalker', description: 'Strike from the shadows of the Underdark.', features: { 3: [{ name: 'Dread Ambusher', description: 'Bonus to Initiative. Extra attack and damage on first turn of combat.' }, { name: 'Umbral Sight', description: 'Invisible to Darkvision.' }] } }, { name: 'Hunter', description: 'Protect civilization from the terrors of the wild.', features: { 3: [{ name: 'Hunter\'s Prey', description: 'Choose Colossus Slayer (hurt foes), Giant Killer (reaction attack), or Horde Breaker (extra attack).' }] } },],
  'Rogue': [{ name: 'Arcane Trickster', description: 'Augment your skills with enchantment and illusion.', features: { 3: [{ name: 'Spellcasting', description: 'Cast Wizard spells.' }, { name: 'Mage Hand Legerdemain', description: 'Invisible Mage Hand for thievery.' }] } }, { name: 'Assassin', description: 'Master the art of death and infiltration.', features: { 3: [{ name: 'Assassinate', description: 'Advantage against creatures who haven\'t acted. Auto-crit on Surprise.' }] } }, { name: 'Soulknife', description: 'Strike with blades of psychic energy.', features: { 3: [{ name: 'Psychic Blades', description: 'Manifest blades to attack. Bonus action attack available.' }, { name: 'Psi-Bolstered Knack', description: 'Add die to failed ability checks.' }] } }, { name: 'Thief', description: 'Hone your skills in larceny and agility.', features: { 3: [{ name: 'Fast Hands', description: 'Use Cunning Action for Sleight of Hand, Thieves Tools, or Use an Object.' }, { name: 'Second-Story Work', description: 'Climb speed equals walk speed.' }] } },],
  'Sorcerer': [{ name: 'Aberrant Sorcery', description: 'Your magic comes from an alien influence.', features: { 3: [{ name: 'Psionic Spells', description: 'Learn Mind Sliver and other psionic spells.' }] } }, { name: 'Clockwork Sorcery', description: 'Channel the order of Mechanus.', features: { 3: [{ name: 'Restore Balance', description: 'Reaction to neutralize Advantage/Disadvantage.' }] } }, { name: 'Draconic Sorcery', description: 'Draw on the magic of dragon blood.', features: { 3: [{ name: 'Draconic Resilience', description: 'AC is 13 + DEX. HP increases.' }] } }, { name: 'Wild Magic Sorcery', description: 'Channel the chaotic forces of the multiverse.', features: { 3: [{ name: 'Wild Magic Surge', description: 'Chance to trigger random magical effects when casting.' }, { name: 'Tides of Chaos', description: 'Gain Advantage on one roll.' }] } },],
  'Warlock': [{ name: 'Archfey Patron', description: 'A pact with a lord or lady of the Feywild.', features: { 3: [{ name: 'Steps of the Fey', description: 'Misty Step uses. Teleport effects.' }] } }, { name: 'Celestial Patron', description: 'A pact with a being of the Upper Planes.', features: { 3: [{ name: 'Healing Light', description: 'Pool of d6s to heal as Bonus Action.' }] } }, { name: 'Fiend Patron', description: 'A pact with a devil from the Lower Planes.', features: { 3: [{ name: 'Dark One\'s Blessing', description: 'Gain Temp HP when you reduce a hostile creature to 0 HP.' }] } }, { name: 'Great Old One Patron', description: 'A pact with an eldritch entity.', features: { 3: [{ name: 'Awakened Mind', description: 'Telepathic communication.' }] } },],
  'Wizard': [{ name: 'Abjurer', description: 'Master of protective magic and wards.', features: { 3: [{ name: 'Arcane Ward', description: 'Create a magical ward that absorbs damage.' }] } }, { name: 'Diviner', description: 'Master of seeking information and seeing the future.', features: { 3: [{ name: 'Portent', description: 'Roll 2d20 after Long Rest. Replace any roll with these values.' }] } }, { name: 'Evoker', description: 'Master of destructive elemental energy.', features: { 3: [{ name: 'Sculpt Spells', description: 'Protect allies from your area of effect spells.' }] } }, { name: 'Illusionist', description: 'Master of deception and phantasms.', features: { 3: [{ name: 'Improved Minor Illusion', description: 'Minor Illusion has both sound and image.' }] } },]
};

export const getLevelData = (className: string, level: number): { features: string[], asi: boolean, subclass: boolean } => {
    const progression = CLASS_PROGRESSION[className] || {};
    const features = progression[level] || [];
    let asi = [4, 8, 12, 16, 19].includes(level);
    if (className === 'Fighter' && [6, 14].includes(level)) asi = true;
    if (className === 'Rogue' && level === 10) asi = true;
    const subclass = level === 3;
    return { features, asi, subclass };
};
